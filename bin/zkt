#!/usr/bin/env bash

cd $(dirname $0)

if which zkstackup >/dev/null; then
    cargo uninstall zkstack
    git config --local core.hooksPath ||
    git config --local core.hooksPath ./.githooks
    zkstackup -p .. --alias
else
    echo zkstackup is not installed, please install it https://github.com/matter-labs/zksync-era/tree/main/zkstack_cli/zkstackup
    cd ../zkstack_cli
    cargo install --path ./crates/zkstack --force
fi
