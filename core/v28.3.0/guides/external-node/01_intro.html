<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>External node - ZKsync Era Documentation</title>


        <!-- Custom HTML head -->
        <script src="https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js"></script>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../css/version-box.css">
        <link rel="stylesheet" href="../.././css/mdbook-admonish.css">

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">ZKsync Era Documentation</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/matter-labs/zksync-era/tree/main/docs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/matter-labs/zksync-era/tree/main/docs/src/guides/external-node/01_intro.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="node-documentation"><a class="header" href="#node-documentation">Node Documentation</a></h1>
<p>The Node (sometimes referred to as External Node or EN) is a read-only replica of the main node.</p>
<h2 id="what-is-the-node"><a class="header" href="#what-is-the-node">What is the Node</a></h2>
<p>The Node is a read-replica of the main (centralized) node that can be run by external parties. It functions by receiving
blocks from the given ZK Stack chain and re-applying transactions locally, starting from the genesis block. The Node
shares most of its codebase with the main node. Consequently, when it re-applies transactions, it does so exactly as the
main node did in the past.</p>
<p><strong>It has three modes of initialization:</strong></p>
<ul>
<li>recovery from genesis (Not supported on ZKsync Era), in Ethereum terms this corresponds to archival node, this option
is slower than recovery from DB dump, but is the easiest way to spin up new Node.</li>
<li>recovery from a DB dump, in Ethereum terms this corresponds to archival node.</li>
<li>recovery from a snapshot, in Ethereum terms this corresponds to light node, such nodes will only have access to
transactions data from after the node was initialized. The database can be pruned on such nodes.</li>
</ul>
<h2 id="high-level-overview"><a class="header" href="#high-level-overview">High-level overview</a></h2>
<p>At a high level, the Node can be seen as an application that has the following modules:</p>
<ul>
<li>API server that provides the publicly available Web3 interface.</li>
<li>Consensus layer (ZKsync Era only for now) that interacts with the peer network and retrieves transactions and blocks
to re-execute.</li>
<li>Sequencer component that actually executes and persists transactions received from the synchronization layer.</li>
<li>Several checker modules that ensure the consistency of the Node state.</li>
</ul>
<p>With the EN, you are able to:</p>
<ul>
<li>Locally recreate and verify a ZK Stack chain’s, for example ZKsync Era’s mainnet/testnet state.</li>
<li>Interact with the recreated state in a trustless way. The validity is locally verified.</li>
<li>Use the Web3 API without having to query the main node.</li>
<li>Send L2 transactions (that will be proxied to the main node).</li>
</ul>
<p>With the EN, you <em>can not</em>:</p>
<ul>
<li>Create L2 blocks or L1 batches on your own.</li>
<li>Generate proofs.</li>
<li>Submit data to L1.</li>
</ul>
<p>A more detailed overview of the Node’s components is provided in the <a href="06_components.html">components</a> section.</p>
<h2 id="api-overview"><a class="header" href="#api-overview">API overview</a></h2>
<p>API exposed by the Node strives to be Web3-compliant. If some method is exposed but behaves differently compared to
Ethereum, it should be considered a bug. Please <a href="https://zksync.io/contact">report</a> such cases.</p>
<h3 id="eth-namespace"><a class="header" href="#eth-namespace"><code>eth</code> namespace</a></h3>
<p>Data getters in this namespace operate in the L2 space: require/return L2 block numbers, check balances in L2, etc.</p>
<p>Available methods:</p>
<div class="table-wrapper"><table><thead><tr><th>Method</th><th>Notes</th></tr></thead><tbody>
<tr><td><code>eth_blockNumber</code></td><td></td></tr>
<tr><td><code>eth_chainId</code></td><td></td></tr>
<tr><td><code>eth_call</code></td><td></td></tr>
<tr><td><code>eth_estimateGas</code></td><td></td></tr>
<tr><td><code>eth_gasPrice</code></td><td></td></tr>
<tr><td><code>eth_newFilter</code></td><td>Maximum amount of installed filters is configurable</td></tr>
<tr><td><code>eth_newBlockFilter</code></td><td>Same as above</td></tr>
<tr><td><code>eth_newPendingTransactionsFilter</code></td><td>Same as above</td></tr>
<tr><td><code>eth_uninstallFilter</code></td><td></td></tr>
<tr><td><code>eth_getLogs</code></td><td>Maximum amount of returned entities can be configured</td></tr>
<tr><td><code>eth_getFilterLogs</code></td><td>Same as above</td></tr>
<tr><td><code>eth_getFilterChanges</code></td><td>Same as above</td></tr>
<tr><td><code>eth_getBalance</code></td><td></td></tr>
<tr><td><code>eth_getBlockByNumber</code></td><td></td></tr>
<tr><td><code>eth_getBlockByHash</code></td><td></td></tr>
<tr><td><code>eth_getBlockTransactionCountByNumber</code></td><td></td></tr>
<tr><td><code>eth_getBlockTransactionCountByHash</code></td><td></td></tr>
<tr><td><code>eth_getCode</code></td><td></td></tr>
<tr><td><code>eth_getStorageAt</code></td><td></td></tr>
<tr><td><code>eth_getTransactionCount</code></td><td></td></tr>
<tr><td><code>eth_getTransactionByHash</code></td><td></td></tr>
<tr><td><code>eth_getTransactionByBlockHashAndIndex</code></td><td></td></tr>
<tr><td><code>eth_getTransactionByBlockNumberAndIndex</code></td><td></td></tr>
<tr><td><code>eth_getTransactionReceipt</code></td><td></td></tr>
<tr><td><code>eth_protocolVersion</code></td><td></td></tr>
<tr><td><code>eth_sendRawTransaction</code></td><td></td></tr>
<tr><td><code>eth_syncing</code></td><td>Node is considered synced if it’s less than 11 blocks behind the main node.</td></tr>
<tr><td><code>eth_coinbase</code></td><td>Always returns a zero address</td></tr>
<tr><td><code>eth_accounts</code></td><td>Always returns an empty list</td></tr>
<tr><td><code>eth_getCompilers</code></td><td>Always returns an empty list</td></tr>
<tr><td><code>eth_hashrate</code></td><td>Always returns zero</td></tr>
<tr><td><code>eth_getUncleCountByBlockHash</code></td><td>Always returns zero</td></tr>
<tr><td><code>eth_getUncleCountByBlockNumber</code></td><td>Always returns zero</td></tr>
<tr><td><code>eth_mining</code></td><td>Always returns false</td></tr>
</tbody></table>
</div>
<h3 id="pubsub"><a class="header" href="#pubsub">PubSub</a></h3>
<p>Only available on the WebSocket servers.</p>
<p>Available methods:</p>
<div class="table-wrapper"><table><thead><tr><th>Method</th><th>Notes</th></tr></thead><tbody>
<tr><td><code>eth_subscribe</code></td><td>Maximum amount of subscriptions is configurable</td></tr>
<tr><td><code>eth_subscription</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="net-namespace"><a class="header" href="#net-namespace"><code>net</code> namespace</a></h3>
<p>Available methods:</p>
<div class="table-wrapper"><table><thead><tr><th>Method</th><th>Notes</th></tr></thead><tbody>
<tr><td><code>net_version</code></td><td></td></tr>
<tr><td><code>net_peer_count</code></td><td>Always returns 0</td></tr>
<tr><td><code>net_listening</code></td><td>Always returns false</td></tr>
</tbody></table>
</div>
<h3 id="web3-namespace"><a class="header" href="#web3-namespace"><code>web3</code> namespace</a></h3>
<p>Available methods:</p>
<div class="table-wrapper"><table><thead><tr><th>Method</th><th>Notes</th></tr></thead><tbody>
<tr><td><code>web3_clientVersion</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="debug-namespace"><a class="header" href="#debug-namespace"><code>debug</code> namespace</a></h3>
<p>The <code>debug</code> namespace gives access to several non-standard RPC methods, which will allow developers to inspect and debug
calls and transactions.</p>
<p>This namespace is disabled by default and can be configured via setting <code>EN_API_NAMESPACES</code> as described in the
<a href="prepared_configs/mainnet-config.env">example config</a>.</p>
<div id="admonition-note" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-title">
<div class="admonition-title">
<div id="admonition-note-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="#admonition-note"></a>
</div>
<div>
<p>The traces will only start being generated for blocks synced after the debug namespace is enabled, they will not be
backfilled! The only way to get traces for historical blocks is to fully re-sync the node</p>
</div>
</div>
<p>Available methods:</p>
<div class="table-wrapper"><table><thead><tr><th>Method</th><th>Notes</th></tr></thead><tbody>
<tr><td><code>debug_traceBlockByNumber</code></td><td></td></tr>
<tr><td><code>debug_traceBlockByHash</code></td><td></td></tr>
<tr><td><code>debug_traceCall</code></td><td></td></tr>
<tr><td><code>debug_traceTransaction</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="zks-namespace"><a class="header" href="#zks-namespace"><code>zks</code> namespace</a></h3>
<p>This namespace contains rollup-specific extensions to the Web3 API. Note that <em>only methods</em> specified in the
<a href="https://docs.zksync.io/build/api-reference/zks-rpc">documentation</a> are considered public. There may be other methods exposed in this namespace, but undocumented
methods come without any kind of stability guarantees and can be changed or removed without notice.</p>
<p>Always refer to the documentation linked above to see the list of stabilized methods in this namespace.</p>
<h3 id="en-namespace"><a class="header" href="#en-namespace"><code>en</code> namespace</a></h3>
<p>This namespace contains methods that Nodes call on the main node while syncing. If this namespace is enabled, other ENs
can sync from this node.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../guides/advanced/91_docker_and_ci.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../guides/external-node/00_quick_start.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../guides/advanced/91_docker_and_ci.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../guides/external-node/00_quick_start.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../../ace.js"></script>
        <script src="../../editor.js"></script>
        <script src="../../mode-rust.js"></script>
        <script src="../../theme-dawn.js"></script>
        <script src="../../theme-tomorrow_night.js"></script>

        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../js/version-box.js"></script>
        <script src="../../js/mermaid-init.js"></script>


    </div>
    </body>
</html>
